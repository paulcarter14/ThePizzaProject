@page
@model IndexModel
@inject ThePizzaProject.Data.AccessControl accessControl
@{
    ViewData["Title"] = "Home page";
}
<audio controls>
    <source src="/sound/Osipov-Kamarinskaya.mp3" type="audio/mp3" />
</audio>

<div class="pizza-Content">
@foreach (var pizza in Model.MyPizzas ?? Model.Pizzas)
{
	<div class="pizzabox">
			 <div class="pizza-title">
		<h2>@pizza.PizzaName</h2>
		</div>
			@{
				int pizzaID = Convert.ToInt32(pizza.PizzaID);

				Func<int, string> GetPizzaPhoto = (pizzaID) =>
				{
					string formattedPizzaId = pizzaID.ToString();
					string photo = Model.photoUrl.FirstOrDefault(p => p.EndsWith(+pizzaID + ".jpeg"));
					return photo;
				};

				string photoUrl = GetPizzaPhoto(pizzaID);
			}

			<img src="@photoUrl" class="pizzaImg">
			
			 <span class="pizzaIngredients">
			@foreach (var ingredient in pizza.PizzaIngredients)
			{
					<span>
						@ingredient.Ingredient.IngredientName</span>

								<span>, </span>
				
			}
			</span>
	</div>
}
</div>

@*<h2>Your Photos</h2>
@foreach (var url in Model.PhotoURLs)
{
	<img src="@url" style="width: 250px">
}

@if (Model.PhotoURLs.Count == 0)
{
	<p>You have not uploaded any photos yet.</p>
}

<p> MpM Development </p>*@


