@page
@model ThePizzaProject.Pages.ThePizzaPage.IndexModel
@{
}

@*Pizzan som klickades på antingen i FindMyPizza eller inne på en annan användares "Profil"

*@
<h1>@Model.Pizzas.UserName</h1>



<div class="pizzaContent">
	<div class="pizzabox">
		<div class="pizza-title">
		<h2 >@Model.Pizzas.Name</h2>
		</div>
		<h3>Rating ⭐⭐⭐⭐⭐</h3>
		@{
			int pizzaID = Convert.ToInt32(Model.Pizzas.ID);

			Func<int, string> GetPizzaPhoto = (pizzaID) =>
			{
				string formattedPizzaId = pizzaID.ToString();
				string photo = Model.photoUrl.FirstOrDefault(p => p.EndsWith(+pizzaID + ".jpeg"));
				return photo;
			};

			string photoUrl = GetPizzaPhoto(pizzaID);
		}

		<img src="@photoUrl" class="pizzaImg">
		<span class="pizzaIngredients">
			@foreach (var pizzaIngredient in @Model.Pizzas.Ingredients)
			{

				<span>
					@pizzaIngredient.Name</span>

			<span>, </span>

			
			}
		</span>

		
		<div class="comment-box">
			<h4>Leave a comment</h4>
		<form method="post">
				<span class="text-danger">@Html.ValidationMessageFor(m => m.Text)</span>
				<textarea class="comment-text-area" name="commentText"></textarea>
				
			<button  class="submit-buttons" type="submit">Submit</button>
				
		</form>
			<button class="submit-buttons" @*Skicka skiten till tränings API*@>Träna bort skiten</button>
		</div>

		@foreach(var comment in Model.Pizzas.Comments)
		{

			<div class="comment-display-box">
				<h5 class="comment-username">@comment.UserName @comment.DateTime</h5>
			
				<spa class="comment-text"classn>@comment.Comment</spa>
			</div>
		}

	</div>




</div>